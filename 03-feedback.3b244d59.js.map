{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAOC,SAASC,cAAc,kBAC9BC,EAAaF,SAASC,cAAc,SACpCE,EAAcH,SAASC,cAAc,YAI3CG,OAAOC,iBAAiB,QAOxB,WACE,GAAwC,IAApCC,OAAOC,KAAKC,GAAaC,OAI3B,OAHAP,EAAWQ,MAAQF,EAAYG,MAC/BR,EAAYO,MAAQF,EAAYI,O,IARpC,MAAMC,EAAkBC,aAAaC,QAJjB,uBAKdP,EAAcK,EAChBG,KAAKC,MAAMJ,GACX,CAAEF,MAAO,GAAIC,QAAS,IAW1Bb,EAAKM,iBAAiB,QAASa,EAAArB,GAAEsB,UAEjC,SAAqBC,GACnB,MAAMC,EAAYD,EAAME,OAAOC,aAAa,QAE1B,UAAdF,GAAuC,YAAdA,IAC3Bb,EAAYa,GAAaD,EAAME,OAAOZ,MAAMc,OAE5CV,aAAaW,QA1BG,sBA0BkBT,KAAKU,UAAUlB,I,GARE,MAYvDT,EAAKM,iBAAiB,UAEtB,SAAsBe,GAEpB,GADAA,EAAMO,iBAC0B,KAA5BzB,EAAWQ,MAAMc,QAA8C,KAA7BrB,EAAYO,MAAMc,OAEtD,YADApB,OAAOwB,MAAM,2DAGf,MAAMC,EAAa,CACjBlB,MAAOT,EAAWQ,MAAMc,OACxBZ,QAAST,EAAYO,MAAMc,QAM7B,IAAKM,OAJLC,QAAQC,IAAIH,GACZf,aAAamB,WA3CK,uBA6ClBb,EAAMc,cAAcC,QACRN,SACHA,EAAWC,IAGK","sources":["src/js/03-feedback.js"],"sourcesContent":["import _ from 'lodash';\n\nconst form = document.querySelector('.feedback-form');\nconst emailInput = document.querySelector('input');\nconst messageArea = document.querySelector('textarea');\n\nconst LS_FORM_KEY = 'feedback-form-state';\n\nwindow.addEventListener('load', handlePageLoad);\n\nconst existingObjJSON = localStorage.getItem(LS_FORM_KEY);\nconst existingObj = existingObjJSON\n  ? JSON.parse(existingObjJSON)\n  : { email: '', message: '' };\n\nfunction handlePageLoad() {\n  if (Object.keys(existingObj).length !== 0) {\n    emailInput.value = existingObj.email;\n    messageArea.value = existingObj.message;\n  } else {\n    return;\n  }\n}\n\nform.addEventListener('input', _.throttle(handleInput, 500));\n\nfunction handleInput(event) {\n  const fieldName = event.target.getAttribute('name');\n\n  if (fieldName === 'email' || fieldName === 'message') {\n    existingObj[fieldName] = event.target.value.trim();\n\n    localStorage.setItem(LS_FORM_KEY, JSON.stringify(existingObj));\n  }\n}\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  if (emailInput.value.trim() === '' || messageArea.value.trim() === '') {\n    window.alert('Seems like some fields are empty, please, fill in them!');\n    return;\n  }\n  const submitData = {\n    email: emailInput.value.trim(),\n    message: messageArea.value.trim(),\n  };\n  console.log(submitData);\n  localStorage.removeItem(LS_FORM_KEY);\n\n  event.currentTarget.reset();\n  for (key in submitData) {\n    delete submitData[key];\n  }\n  /*emailInput.value = '';\n  messageArea.value = '';*/\n}\n"],"names":["$kEUo3","parcelRequire","$945622fd0f572e60$var$form","document","querySelector","$945622fd0f572e60$var$emailInput","$945622fd0f572e60$var$messageArea","window","addEventListener","Object","keys","$945622fd0f572e60$var$existingObj","length","value","email","message","$945622fd0f572e60$var$existingObjJSON","localStorage","getItem","JSON","parse","$parcel$interopDefault","throttle","event","fieldName","target","getAttribute","trim","setItem","stringify","preventDefault","alert","submitData","key","console","log","removeItem","currentTarget","reset"],"version":3,"file":"03-feedback.3b244d59.js.map"}